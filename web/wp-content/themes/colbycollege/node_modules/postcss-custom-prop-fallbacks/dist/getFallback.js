'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getFallback = getFallback;

var _getVariableFrom = require('./getVariableFrom');

/**
 * Builds the fallbabck string for a declaration using a custom prop.
 * @param {Declaration} decl A PostCSS declaration object.
 * @param {object} customProps The key: value set of custom properties found.
 * @return {string} A string representation of the fallback declaration.
 */
function getFallback({ decl, customProps }) {
    const originalValue = decl.value.trim();
    const value = (0, _getVariableFrom.getVariableFrom)(originalValue);

    if (value === null || !(value in customProps)) {
        return '';
    }

    const newValue = originalValue.replace(`var(${value})`, customProps[value]);
    return `\n  ${decl.prop}: ${newValue}`;
}